{"mappings":"iiBAAA,IAAAA,EAAAC,EAAA,S,uCCAAC,EAAAD,EAAA,S,aACME,GAAO,G,cAAAC,WAEEC,ECHZ,W,sBDGkBC,I,6BAGnBC,IAAA,S,MAAA,WACEJ,EAAKK,YAAYC,UAAW,EAC5BN,EAAKO,cAAcC,YAAc,YACjCR,EAAKS,gBAAgBC,UAAUC,IAAI,Y,IAGrCP,IAAA,U,MAAA,WACEJ,EAAKK,YAAYC,UAAW,EAC5BN,EAAKO,cAAcC,YAAc,aACjCR,EAAKS,gBAAgBC,UAAUE,OAAO,Y,IAGxCR,IAAA,O,MAAA,WACEJ,EAAKK,YAAYK,UAAUE,OAAO,Y,IAGpCR,IAAA,O,MAAA,WACEJ,EAAKK,YAAYK,UAAUC,IAAI,Y,OCvBhC,G,uCFYGE,GGZNd,EAAAD,EAAA,S,cHYa,EAAAgB,EAAAb,YACPc,EAAa,IAAI,EAAAC,EAAAf,SACjBgB,EAAS,IAAI,EAAAC,EAAAjB,SACbkB,EAAc,IAAIjB,EAClBkB,EAAS,IAAI,EAAAC,EAAApB,S,SAWJqB,I,OAAAA,EAAfC,EAAA1B,EAAA,CAAA0B,EAAAC,GAAAC,MAAA,SAAAC,EAAwBC,G,IAQdC,E,yEAPRD,EAAEE,iBACFd,EAAWe,MAAQH,EAAEI,cAAcC,SAASC,YAAYC,OAExD,EAAAC,EAAAC,yBACArB,EAAWsB,Y,kBAGUtB,EAAWuB,kB,UAEX,KAFbV,EAAIW,EAAAC,MAEDC,OAAgB1B,EAAWe,MAAK,C,yCAChCb,EAAOyB,gB,SAGhB,EAAAP,EAAAQ,wBAAuBf,GACvBX,EAAO2B,kBAAkBhB,EAAKiB,WAE9B1B,EAAY2B,OACZ3B,EAAY4B,S,kDAEZC,QAAQC,MAAKV,EAAAW,I,2DApBMC,MAAAC,KAAAC,U,UAwBRC,I,OAAAA,EAAf/B,EAAA1B,EAAA,CAAA0B,EAAAC,GAAAC,MAAA,SAAAC,I,IAIUE,E,kFAFNT,EAAYoC,U,SAEOxC,EAAWuB,kB,OAAxBV,EAAIW,EAAAC,MAEV,EAAAL,EAAAQ,wBAAuBf,GACvBT,EAAY4B,SAERnB,EAAKiB,WAAa9B,EAAWyC,YAAczC,EAAW0C,WACxDtC,EAAYuC,OACZzC,EAAO0C,sB,kDAGTX,QAAQC,MAAKV,EAAAW,I,2DAdQC,MAAAC,KAAAC,U,CAjCzBxC,EAAK+C,WAAWC,iBAAiB,U,SASTlC,G,OAATL,EAAQ6B,MAAAC,KAAAC,U,IARvBxC,EAAKR,YAAYwD,iBAAiB,S,kBAgCnBP,EAAUH,MAAAC,KAAAC,U,IA/BzBxC,EAAKiD,YAAYD,iBAAiB,SAAS,WACzCzC,EAAO0C,a,IAETC,SAASF,iBAAiB,UAAU,WAClCzC,EAAO4C,mB","sources":["src/js/01-load-more.js","src/js/components/load-more-btn.js","<<jsx-config-pragma.js>>","src/js/components/header-on-scroll.js"],"sourcesContent":["import '../sass/index.scss';\nimport getRefs from './components/getRefs';\nimport ApiService from './components/api-service';\nimport LoadMoreBtn from './components/load-more-btn';\nimport {\n  createMarkupPhotoCards,\n  clearMarkupPhotoCards,\n} from './components/markup-cards';\nimport NotifyMessages from './components/notify-messages';\nimport Scroll from './components/scrollTo';\nimport HeaderOnScroll from './components/header-on-scroll';\n\nconst refs = getRefs();\nconst apiServise = new ApiService();\nconst notify = new NotifyMessages();\nconst loadMoreBtn = new LoadMoreBtn();\nconst scroll = new Scroll();\n\nrefs.searchForm.addEventListener('submit', onSearch);\nrefs.loadMoreBtn.addEventListener('click', onLoadMore);\nrefs.scrollToTop.addEventListener('click', () => {\n  scroll.scrollToTop();\n});\ndocument.addEventListener('scroll', () => {\n  scroll.handleScrollToTop();\n});\n\nasync function onSearch(e) {\n  e.preventDefault();\n  apiServise.query = e.currentTarget.elements.searchQuery.value;\n\n  clearMarkupPhotoCards();\n  apiServise.resetPage();\n\n  try {\n    const data = await apiServise.fetchPhotoCards();\n\n    if (data.total === 0 || !apiServise.query) {\n      return notify.onFetchError();\n    }\n\n    createMarkupPhotoCards(data);\n    notify.onTotalPhotoCards(data.totalHits);\n\n    loadMoreBtn.show();\n    loadMoreBtn.enable();\n  } catch (error) {\n    console.error(error);\n  }\n}\n\nasync function onLoadMore() {\n  try {\n    loadMoreBtn.disable();\n\n    const data = await apiServise.fetchPhotoCards();\n\n    createMarkupPhotoCards(data);\n    loadMoreBtn.enable();\n\n    if (data.totalHits <= apiServise.currentPage * apiServise.per_page) {\n      loadMoreBtn.hide();\n      notify.onFinishPhotoCards();\n    }\n  } catch (error) {\n    console.error(error);\n  }\n}\n","import getRefs from './getRefs';\nconst refs = getRefs();\n\nexport default class LoadMoreBtn {\n  constructor() {}\n\n  enable() {\n    refs.loadMoreBtn.disabled = false;\n    refs.loadMoreLabel.textContent = 'Load more';\n    refs.loadMoreSpinner.classList.add('is-hidden');\n  }\n\n  disable() {\n    refs.loadMoreBtn.disabled = true;\n    refs.loadMoreLabel.textContent = 'Loading...';\n    refs.loadMoreSpinner.classList.remove('is-hidden');\n  }\n\n  show() {\n    refs.loadMoreBtn.classList.remove('is-hidden');\n  }\n\n  hide() {\n    refs.loadMoreBtn.classList.add('is-hidden');\n  }\n}\n",null,"export default class HeaderOnScroll {\n  constructor() {\n    this.lastKnownScrollY = 0;\n    this.currentScrollY = 0;\n    this.ticking = false;\n    this.idOfHeader = 'header';\n    this.eleHeader = null;\n    this.classes = {\n      showed: 'header-show',\n      hided: 'header-hide',\n    };\n  }\n\n  onScroll() {\n    this.currentScrollY = window.pageYOffset;\n    this.update();\n  }\n\n  update() {\n    if (this.currentScrollY < this.lastKnownScrollY) {\n      this.show();\n    } else if (this.currentScrollY > this.lastKnownScrollY) {\n      this.hide();\n    }\n    this.lastKnownScrollY = this.currentScrollY;\n  }\n\n  show() {\n    if (eleHeader.classList.contains(classes.hided)) {\n      eleHeader.classList.remove(classes.hided);\n      eleHeader.classList.add(classes.showed);\n    }\n  }\n\n  hide() {\n    if (\n      eleHeader.classList.contains(classes.showed) ||\n      !eleHeader.classList.contains(classes.hided)\n    ) {\n      eleHeader.classList.remove(classes.showed);\n      eleHeader.classList.add(classes.hided);\n    }\n  }\n  onload() {\n    window.onload = function () {\n      eleHeader = document.getElementById(idOfHeader);\n      document.addEventListener('scroll', onScroll, false);\n    };\n  }\n}\n"],"names":["$bpxeT","parcelRequire","$8MBJY","$a59411585e32db69$var$refs","default","$a59411585e32db69$export$2e2bcd8739ae039","LoadMoreBtn","key","loadMoreBtn","disabled","loadMoreLabel","textContent","loadMoreSpinner","classList","add","remove","$c3ddedcda2f549ef$var$refs","$ejYMw","$c3ddedcda2f549ef$var$apiServise","$gYaUm","$c3ddedcda2f549ef$var$notify","$cBT1L","$c3ddedcda2f549ef$var$loadMoreBtn","$c3ddedcda2f549ef$var$scroll","$4ecxU","$c3ddedcda2f549ef$var$_onSearch","$parcel$interopDefault","$2TvXO","mark","_callee","e","data","preventDefault","query","currentTarget","elements","searchQuery","value","$bsg3S","clearMarkupPhotoCards","resetPage","fetchPhotoCards","_ctx","sent","total","onFetchError","createMarkupPhotoCards","onTotalPhotoCards","totalHits","show","enable","console","error","t0","apply","this","arguments","$c3ddedcda2f549ef$var$_onLoadMore","disable","currentPage","per_page","hide","onFinishPhotoCards","searchForm","addEventListener","scrollToTop","document","handleScrollToTop"],"version":3,"file":"01-load-more.ea00051d.js.map"}