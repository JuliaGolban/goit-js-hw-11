{"mappings":"kgBACA,MAAMA,GAAO,GADbC,EAAAC,EAAA,UACaC,W,sDCWb,MAAMC,GAAO,EAAAH,EAAAE,WACPE,EAAa,IAAI,EAAAC,EAAAH,SACjBI,EAAS,IAAI,EAAAC,EAAAL,SACbM,EAAc,IDZL,MAGbC,SACEV,EAAKW,YAAYC,UAAW,EAC5BZ,EAAKa,cAAcC,YAAc,YACjCd,EAAKe,gBAAgBC,UAAUC,IAAI,Y,CAGrCC,UACElB,EAAKW,YAAYC,UAAW,EAC5BZ,EAAKa,cAAcC,YAAc,aACjCd,EAAKe,gBAAgBC,UAAUG,OAAO,Y,CAGxCC,OACEpB,EAAKW,YAAYK,UAAUG,OAAO,Y,CAGpCE,OACErB,EAAKW,YAAYK,UAAUC,IAAI,Y,CAnBjCK,cAAc,GCYVC,EAAS,IAAI,EAAAC,EAAArB,SAEnBC,EAAKqB,WAAWC,iBAAiB,UASjCC,eAAwBC,GACtBA,EAAEC,iBACFzB,EAAK0B,MAAMd,UAAUC,IAAI,mBACzBZ,EAAW0B,MAAQH,EAAEI,cAAcC,SAASC,YAAYC,OAExD,EAAAC,EAAAC,yBACAhC,EAAWiC,YAEX,IACE,MAAMC,QAAalC,EAAWmC,kBAE9B,GAAmB,IAAfD,EAAKE,QAAgBpC,EAAW0B,MAClC,OAAOxB,EAAOmC,eAMhB,IAHA,EAAAN,EAAAO,wBAAuBJ,GACvBhC,EAAOqC,kBAAkBL,EAAKM,WAE1BN,EAAKM,WAAaxC,EAAWyC,YAAczC,EAAW0C,SAExD,OADAtC,EAAYY,OACLd,EAAOyC,qBAGhBvC,EAAYW,OACZX,EAAYC,Q,CACZ,MAAOuC,GACPC,QAAQD,MAAMA,E,KAlClB7C,EAAKO,YAAYe,iBAAiB,SAsClCC,iBACE,IACElB,EAAYS,UAEZ,MAAMqB,QAAalC,EAAWmC,mBAE9B,EAAAJ,EAAAO,wBAAuBJ,GACvB9B,EAAYC,SAER6B,EAAKM,WAAaxC,EAAWyC,YAAczC,EAAW0C,WACxDtC,EAAYY,OACZd,EAAOyC,qB,CAET,MAAOC,GACPC,QAAQD,MAAMA,E,KAnDlB7C,EAAK+C,YAAYzB,iBAAiB,SAAS,KACzCH,EAAO4B,aAAa,IAEtBC,SAAS1B,iBAAiB,UAAU,KAClCH,EAAO8B,mBAAmB","sources":["src/js/common/load-more-btn.js","src/js/load-more.js"],"sourcesContent":["import getRefs from './getRefs';\nconst refs = getRefs();\n\nexport default class LoadMoreBtn {\n  constructor() {}\n\n  enable() {\n    refs.loadMoreBtn.disabled = false;\n    refs.loadMoreLabel.textContent = 'Load more';\n    refs.loadMoreSpinner.classList.add('is-hidden');\n  }\n\n  disable() {\n    refs.loadMoreBtn.disabled = true;\n    refs.loadMoreLabel.textContent = 'Loading...';\n    refs.loadMoreSpinner.classList.remove('is-hidden');\n  }\n\n  show() {\n    refs.loadMoreBtn.classList.remove('is-hidden');\n  }\n\n  hide() {\n    refs.loadMoreBtn.classList.add('is-hidden');\n  }\n}\n","import '../sass/index.scss';\nimport getRefs from './common/getRefs';\nimport ApiService from './common/api-service';\nimport LoadMoreBtn from './common/load-more-btn';\nimport {\n  createMarkupPhotoCards,\n  clearMarkupPhotoCards,\n} from './common/markup-cards';\nimport NotifyMessages from './common/notify-messages';\nimport Scroll from './common/scrollTo';\nimport './common/header-on-scroll';\n\nconst refs = getRefs();\nconst apiServise = new ApiService();\nconst notify = new NotifyMessages();\nconst loadMoreBtn = new LoadMoreBtn();\nconst scroll = new Scroll();\n\nrefs.searchForm.addEventListener('submit', onSearch);\nrefs.loadMoreBtn.addEventListener('click', onLoadMore);\nrefs.scrollToTop.addEventListener('click', () => {\n  scroll.scrollToTop();\n});\ndocument.addEventListener('scroll', () => {\n  scroll.handleScrollToTop();\n});\n\nasync function onSearch(e) {\n  e.preventDefault();\n  refs.title.classList.add('visually-hidden');\n  apiServise.query = e.currentTarget.elements.searchQuery.value;\n\n  clearMarkupPhotoCards();\n  apiServise.resetPage();\n\n  try {\n    const data = await apiServise.fetchPhotoCards();\n\n    if (data.total === 0 || !apiServise.query) {\n      return notify.onFetchError();\n    }\n\n    createMarkupPhotoCards(data);\n    notify.onTotalPhotoCards(data.totalHits);\n\n    if (data.totalHits <= apiServise.currentPage * apiServise.per_page) {\n      loadMoreBtn.hide();\n      return notify.onFinishPhotoCards();\n    }\n\n    loadMoreBtn.show();\n    loadMoreBtn.enable();\n  } catch (error) {\n    console.error(error);\n  }\n}\n\nasync function onLoadMore() {\n  try {\n    loadMoreBtn.disable();\n\n    const data = await apiServise.fetchPhotoCards();\n\n    createMarkupPhotoCards(data);\n    loadMoreBtn.enable();\n\n    if (data.totalHits <= apiServise.currentPage * apiServise.per_page) {\n      loadMoreBtn.hide();\n      notify.onFinishPhotoCards();\n    }\n  } catch (error) {\n    console.error(error);\n  }\n}\n"],"names":["$004e325c04357530$var$refs","$abmwC","parcelRequire","default","$e13b538bfdccfbd0$var$refs","$e13b538bfdccfbd0$var$apiServise","$j06H3","$e13b538bfdccfbd0$var$notify","$03wnz","$e13b538bfdccfbd0$var$loadMoreBtn","enable","loadMoreBtn","disabled","loadMoreLabel","textContent","loadMoreSpinner","classList","add","disable","remove","show","hide","constructor","$e13b538bfdccfbd0$var$scroll","$kxVMM","searchForm","addEventListener","async","e","preventDefault","title","query","currentTarget","elements","searchQuery","value","$bIiuo","clearMarkupPhotoCards","resetPage","data","fetchPhotoCards","total","onFetchError","createMarkupPhotoCards","onTotalPhotoCards","totalHits","currentPage","per_page","onFinishPhotoCards","error","console","scrollToTop","document","handleScrollToTop"],"version":3,"file":"load-more.a7cc149e.js.map"}